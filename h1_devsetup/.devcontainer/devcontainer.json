{
  "name": "H1 Locomotion Development Container",
  "privileged": true,
  "remoteUser": "robot",
  "build": { "dockerfile": "Dockerfile" },
  "features": {
    "ghcr.io/devcontainers/features/common-utils:2": {
      "version": "latest",
      "configureZshAsDefaultShell": true,
      "username": "robot",
      "userUid": "1000",
      "userGid": "1000"
    }
  },
  "workspaceFolder": "/home/robot/ws",
  "workspaceMount": "source=${localWorkspaceFolder},target=/home/robot/ws,type=bind",
  "containerEnv": {
    "LANG": "en_US.UTF-8",
    "LANGUAGE": "en_US:en",
    "LC_ALL": "en_US.UTF-8"
  },
  "runArgs": [
    "--net=host",
    "-e", "DISPLAY=${env:DISPLAY}",
    "--gpus", "all",
    "-e", "NVIDIA_DRIVER_CAPABILITIES=all",
    "-e", "NVIDIA_VISIBLE_DEVICES=all"
  ],
  "mounts": [
    {
      "source": "/tmp/.X11-unix",
      "target": "/tmp/.X11-unix",
      "type": "bind",
      "consistency": "cached"
    }
  ],
  "postCreateCommand": {
    "zshrc_0": "echo 'source /opt/ros/noetic/setup.zsh' >> /home/robot/.zshrc",
    "zshrc_1": "echo 'source devel/setup.zsh' >> /home/robot/.zshrc",
    "clone_unitree_ros": "git clone https://github.com/unitreerobotics/unitree_ros.git src/unitree_ros --recursive",
    "chown-ws": "sudo chown -R robot /home/robot/ws/"
  }
}
